"use strict";(self.webpackChunkviolet=self.webpackChunkviolet||[]).push([[380],{5380:(D,p,i)=>{i.r(p),i.d(p,{OffersModule:()=>j});var d=i(6895),l=i(9342),O=i(7579),C=i(4408);const Z=new(i(7565).v)(C.o);var T=i(4482),y=i(5403),S=i(1884),m=i(5095),t=i(8274),u=i(3262),h=i(3658);function M(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",6),t._UZ(1,"img",7),t.TgZ(2,"div",8)(3,"h5",9),t._uU(4),t.qZA(),t.TgZ(5,"p",10),t._uU(6),t.qZA(),t.TgZ(7,"a",11),t._uU(8,"See details"),t.qZA(),t.TgZ(9,"div",12),t.NdJ("click",function(){const f=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.addCart(f.id))}),t._uU(10,"Add to cart"),t.qZA()()()}if(2&n){const e=s.$implicit;t.xp6(1),t.s9C("src",e.img,t.LSH),t.xp6(3),t.Oqu(e.name),t.xp6(2),t.hij("",e.price," \u20ac"),t.xp6(1),t.MGl("routerLink","/offers/",e.id,"")}}let U=(()=>{class n{constructor(e,r){this.offerService=e,this.store=r,this.searchOffers$=new O.x}ngOnInit(){this.searchOffers$.pipe(function A(n,s=Z){return(0,T.e)((e,r)=>{let o=null,f=null,c=null;const g=()=>{if(o){o.unsubscribe(),o=null;const a=f;f=null,r.next(a)}};function w(){const a=c+n,v=s.now();if(v<a)return o=this.schedule(void 0,a-v),void r.add(o);g()}e.subscribe((0,y.x)(r,a=>{f=a,c=s.now(),o||(o=s.schedule(w,n),r.add(o))},()=>{g(),r.complete()},void 0,()=>{f=o=null}))})}(300),(0,S.x)()).subscribe(e=>{this.offers$=this.offerService.getOffers(e)}),this.offers$=this.offerService.getOffers()}search(e){this.searchOffers$.next(e)}addCart(e){this.offers$&&this.offers$.subscribe(r=>{const o=r.find(f=>f.id===e);o&&this.store.dispatch(new m.w(o))})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(u.K),t.Y36(h.yh))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-offers"]],decls:8,vars:3,consts:[[1,"p-3","m-0"],["for","search",1,"form-label"],["id","search",1,"form-control",3,"input"],["searchInput",""],[1,"offers","mt-4"],["class","card",4,"ngFor","ngForOf"],[1,"card"],["alt","Offer image",1,"card-img-top",3,"src"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[1,"btn","btn-primary","me-4","mb-2",3,"routerLink"],[1,"btn","btn-primary","mb-2",3,"click"]],template:function(e,r){if(1&e){const o=t.EpF();t.TgZ(0,"div",0)(1,"label",1),t._uU(2,"Search offers"),t.qZA(),t.TgZ(3,"input",2,3),t.NdJ("input",function(){t.CHM(o);const c=t.MAs(4);return t.KtG(r.search(c.value))}),t.qZA(),t.TgZ(5,"div",4),t.YNc(6,M,11,4,"div",5),t.ALo(7,"async"),t.qZA()()}2&e&&(t.xp6(6),t.Q6J("ngForOf",t.lcZ(7,1,r.offers$)))},dependencies:[d.sg,l.yS,d.Ov],styles:[".offers[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));grid-gap:1em}.card-img-top[_ngcontent-%COMP%]{width:100%;height:180px;object-fit:contain}"]}),n})();function b(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",2),t._UZ(1,"img",3),t.TgZ(2,"div",4)(3,"h5",5),t._uU(4),t.qZA(),t.TgZ(5,"p",6),t._uU(6),t.qZA(),t.TgZ(7,"div",7),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.addToCart())}),t._uU(8,"Add to cart"),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(1),t.s9C("src",e.offer.img,t.LSH),t.xp6(3),t.Oqu(e.offer.name),t.xp6(2),t.hij("",e.offer.price," \u20ac")}}let $=(()=>{class n{constructor(e,r,o){this.route=e,this.store=r,this.offerService=o}ngOnInit(){const e=Number(this.route.snapshot.paramMap.get("id"));this.offerService.getOffers().subscribe(r=>{this.offer=r.find(o=>o.id===e)})}addToCart(){this.offer&&this.store.dispatch(new m.w(this.offer))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(l.gz),t.Y36(h.yh),t.Y36(u.K))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-offer-detail"]],decls:2,vars:1,consts:[[1,"p-3","m-0"],["class","card",4,"ngIf"],[1,"card"],["alt","Offer image",1,"card-img-top",3,"src"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[1,"btn","btn-primary","mb-2",3,"click"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0),t.YNc(1,b,9,3,"div",1),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngIf",r.offer))},dependencies:[d.O5],styles:[".card[_ngcontent-%COMP%]{max-width:300px}.card-img-top[_ngcontent-%COMP%]{width:100%;height:180px;object-fit:contain}"]}),n})();var F=i(4006);const Y=[{path:"",component:U},{path:":id",component:$},{path:"**",redirectTo:""}];let j=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[d.ez,F.u5,l.Bz.forChild(Y)]}),n})()}}]);