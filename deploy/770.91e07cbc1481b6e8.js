"use strict";(self.webpackChunkviolet=self.webpackChunkviolet||[]).push([[770],{2770:(y,p,s)=>{s.r(p),s.d(p,{SecurityModule:()=>S});var f=s(6895),h=s(655),o=s(4006),u=s(3658),c=s(529),g=s(216),v=s(4723),t=s(8274),m=s(9342),Z=s(2340);let d=(()=>{class r{constructor(n){this.httpClient=n,this.env=Z.N}signIn(n,i){return this.httpClient.post(this.env.backendUrl+"/signin",{email:n,password:i},{observe:"response"})}signUp(n,i){return this.httpClient.post(this.env.backendUrl+"/signup",{email:n,password:i})}}return r.\u0275fac=function(n){return new(n||r)(t.LFG(c.eN))},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();class l{constructor(e,n,i,a){this.router=e,this.formBuilder=n,this.clientService=i,this.store=a}ngOnInit(){this.form=this.formBuilder.group({email:["",{validators:[o.kI.required,o.kI.email]}],password:["",{validators:[o.kI.required,o.kI.minLength(8)]}]})}signin(){this.form.valid&&this.clientService.signIn(this.form.value.email,this.form.value.password).subscribe({next:e=>{if(e instanceof c.Zn){const n=e.headers.get("Authorization");if(null!=n){const i=n.split(" ");2==i.length&&this.store.dispatch(new g.p(i[1]))}}this.router.navigate(["/"])},error:()=>{console.log("error")}})}}l.\u0275fac=function(e){return new(e||l)(t.Y36(m.F0),t.Y36(o.qu),t.Y36(d),t.Y36(u.yh))},l.\u0275cmp=t.Xpm({type:l,selectors:[["app-signin"]],decls:13,vars:1,consts:[[1,"p-3","m-0","form",3,"formGroup"],[1,"mb-3"],["for","email",1,"form-label"],["type","text","placeholder","Email","id","email","formControlName","email",1,"form-control"],["for","password",1,"form-label"],["type","password","placeholder","Password","id","password","formControlName","password",1,"form-control"],[1,"btn","btn-primary","mt-2",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"form",0)(1,"p"),t._uU(2,"Sign in"),t.qZA(),t.TgZ(3,"div",1)(4,"label",2),t._uU(5,"Email"),t.qZA(),t._UZ(6,"input",3),t.qZA(),t.TgZ(7,"div",1)(8,"label",4),t._uU(9,"Password"),t.qZA(),t._UZ(10,"input",5),t.qZA(),t.TgZ(11,"button",6),t.NdJ("click",function(){return n.signin()}),t._uU(12,"Sign in"),t.qZA()()),2&e&&t.Q6J("formGroup",n.form)},dependencies:[o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u],styles:[".form[_ngcontent-%COMP%]{max-width:500px}"]}),(0,h.gn)([(0,u.Ph)(v.X.getJWT)],l.prototype,"token",void 0);const C=[{path:"signin",component:l},{path:"signup",component:(()=>{class r{constructor(n,i,a){this.router=n,this.formBuilder=i,this.clientService=a}ngOnInit(){this.form=this.formBuilder.group({email:["",{validators:[o.kI.required,o.kI.email]}],password:["",{validators:[o.kI.required,o.kI.minLength(8)]}],cpassword:["",{validators:[o.kI.required,o.kI.minLength(8)]}]})}signup(){this.form.valid&&this.form.value.password===this.form.value.cpassword&&this.clientService.signUp(this.form.value.email,this.form.value.password).subscribe(n=>{this.router.navigate(["/"])})}}return r.\u0275fac=function(n){return new(n||r)(t.Y36(m.F0),t.Y36(o.qu),t.Y36(d))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-signup"]],decls:17,vars:1,consts:[[1,"p-3","m-0","form",3,"formGroup"],[1,"mb-3"],["for","email",1,"form-label"],["type","text","placeholder","Email","id","email","formControlName","email",1,"form-control"],["for","password",1,"form-label"],["type","password","placeholder","Password","id","password","formControlName","password",1,"form-control"],["for","cpassword",1,"form-label"],["type","password","placeholder","Confirm Password","id","cpassword","formControlName","cpassword",1,"form-control"],[1,"btn","btn-primary","mt-2",3,"click"]],template:function(n,i){1&n&&(t.TgZ(0,"form",0)(1,"p"),t._uU(2,"Sign up"),t.qZA(),t.TgZ(3,"div",1)(4,"label",2),t._uU(5,"Email"),t.qZA(),t._UZ(6,"input",3),t.qZA(),t.TgZ(7,"div",1)(8,"label",4),t._uU(9,"Password"),t.qZA(),t._UZ(10,"input",5),t.qZA(),t.TgZ(11,"div",1)(12,"label",6),t._uU(13,"Password"),t.qZA(),t._UZ(14,"input",7),t.qZA(),t.TgZ(15,"button",8),t.NdJ("click",function(){return i.signup()}),t._uU(16,"Sign up"),t.qZA()()),2&n&&t.Q6J("formGroup",i.form)},dependencies:[o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u],styles:[".form[_ngcontent-%COMP%]{max-width:500px}"]}),r})()},{path:"**",redirectTo:"login"}];let S=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[f.ez,o.UX,m.Bz.forChild(C)]}),r})()}}]);